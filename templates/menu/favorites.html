{% extends 'base.html' %}
{% load static %}

{% block title %}Избранное{% endblock %}

{% block content %}
<div class="container">
    <div class="favorites-page">
        <h1 class="page-title">Избранное</h1>

        {% if favorites %}
        <div class="products-grid">
            {% for favorite in favorites %}
            {% with product=favorite.product %}
            <div class="product-card" data-product-id="{{ product.pk }}">
                <a href="{{ product.get_absolute_url }}" class="product-image-link">
                    {% if product.image %}
                    <img src="{{ product.image.url }}" alt="{{ product.name }}" class="product-image">
                    {% else %}
                    <div class="product-image product-image-placeholder">
                        <span>Suwi</span>
                    </div>
                    {% endif %}
                </a>

                <div class="product-content">
                    <h3 class="product-name">
                        <a href="{{ product.get_absolute_url }}">{{ product.name }}</a>
                    </h3>

                    <p class="product-category">{{ product.category.name }}</p>

                    <div class="product-footer">
                        <span class="product-price">{{ product.price|floatformat:0 }} сум</span>

                        <div class="product-actions">
                            <button class="btn-favorite active"
                                    data-product-id="{{ product.pk }}"
                                    title="Удалить из избранного">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" stroke-width="2">
                                    <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>
                                </svg>
                            </button>

                            <button class="btn btn-primary btn-add-to-cart"
                                    data-product-id="{{ product.pk }}">
                                В корзину
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            {% endwith %}
            {% endfor %}
        </div>
        {% else %}
        <div class="empty-state">
            <p>В избранном пока ничего нет</p>
            <a href="{% url 'menu:catalog' %}" class="btn btn-primary">Перейти в меню</a>
        </div>
        {% endif %}
    </div>
</div>
{% endblock %}
